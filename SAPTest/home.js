var UpdateInterval=2;var PixelPerInterval=4;var scorllerInterval;var noleagues=0;var noWindow="";var l=0;var p=0;var scSquad=0;var updatedON_kk=0;var twWindow=0;var fbWindow=0;var twusername="";var twauth=false;var twbadgeopen=0;var origTeam=[];var myTeam=[];var badgeonamefortw="";var badgepicfortw="";var badgedescfortw="";var badgeidfortw=0;var origPow;var powplay;var teamPlayer;var uncap_sch;var updated_without_stealth=0;var updated_with_stealth=0;var scheduleStealth_app;var history_team_id=0;function start_scroll_left_badges(){scorllerInterval=setInterval(scroll_left_badges,UpdateInterval)}function scroll_left_badges(){document.getElementById("badge").scrollLeft+=PixelPerInterval;scrolling_left();scrolling_right()}function start_scroll_right_badges(){scorllerInterval=setInterval(scroll_right_badges,UpdateInterval)}function scroll_right_badges(){document.getElementById("badge").scrollLeft-=PixelPerInterval;scrolling_right();scrolling_left()}function stop_scrolling(){clearInterval(scorllerInterval)}function scrolling_right(){p=p-1;var k=document.getElementById("badges_ul");var len=$("#badges_ul").find("li").length;$(".scrollingRight").unbind("click",scrolling_right);$(".scrollingRight").attr("id","badges_right");$("#badges_right").unbind("click",scrolling_left);if(len>8){if($("#badges_ul").position().left+920>$("#badge").position().left){$(k).animate({left:"-="+$("#badges_ul").position().left},function(){if(p<=0){$(".scrollingLeft").attr("id","left_disable");$(".scrollingLeft").unbind("click",scrolling_right)}});$(".scrollingLeft").attr("id","left_disable")}else{$(k).animate({left:"+=920"},function(){if(p<=0){$(".scrollingLeft").attr("id","left_disable");$(".scrollingLeft").unbind("click",scrolling_right)}})}}$(".scrollingRight").bind("click",scrolling_left)}function scrolling_left(){p=p+1;var k=document.getElementById("badges_ul");var len=$("#badges_ul").find("li").length;$(".scrollingLeft").attr("id","badges_left");$(".scrollingRight").unbind("click",scrolling_left);if(len>8){if(($("#badges_ul").offset().left+$("#badges_ul").width())>($("#badge").offset().left+$(".badgesList").width())){$("#badges_right").unbind("click",scrolling_left);var diff=($("#badges_ul").offset().left+$("#badges_ul").width())-($("#badge").offset().left+$("#badge").width());if(diff>920){$(k).animate({left:"-=920"},function(){if(p<=1){$("#badges_left").bind("click",scrolling_right)}if(diff==981){$(".scrollingRight").attr("id","right_disable");$(".scrollingRight").unbind("click",scrolling_left)}})}else{$(k).animate({left:"-="+(diff+9)},function(){if(diff==981){$(".scrollingRight").attr("id","right_disable");$(".scrollingRight").unbind("click",scrolling_left)}if(p<=1){$("#badges_left").bind("click",scrolling_right)}});$("#badges_left").attr("src","rite1.png");$(".scrollingRight").attr("id","right_disable")}$("#badges_right").bind("click",scrolling_left)}else{}$("#badges_left").attr("src","left.png")}}var snippetPlayers=function(){return{playerTr:'<div value="%id%" pulse_id="%pulse_id%" st="%s_team%" ss="%ss_name%" style="width:481px;cursor:default;" class="playerlist" s="%s_id%" t="%t_id%" d="%d_id%" a="%playername1%" p="%price%"><div class="namesorting" uncapped=%uncapped% style="width: 227px;" ><div style="margin-left:0px;" class="skilllogos s%d_id%" id="s%s_id%" dual_skill="s%d_id%"></div><span class="align" style="">%playername%</span></div><div class="teamsorting" style="width: 94px;"><div class="teamlogos" id="t%t_id%" src="" country="%cid%" ></div><span class="align" style="">%teamname%</span></div><div class="pricevalues" style="text-align: center;width: 73px;"><span class="align" style="float:right;margin-right: 17px;">%price%</span></div><div style="text-align:right;width: 79px;" class="pricesorting"><span class="align" style="float: right;">%points%</span></div></div>',pplayer_old:'<div class="oldpayerheading" style=""><p>OLD POWER PLAYER</p></div> <div class="oldplayerName"><div class="namesorting" uncapped="%uncap%" style="width: 205px;margin-top: 3px;margin-left:10px;"><div style="margin-left:0px;" class="skilllogos s%d_id%" id="s%skill_id%" dual_skill="s%d_id%"></div><span class="align" style="">%name%</span></div><div class="teamsorting" style="width: 81px;margin-top: 3px;"><div class="teamlogos" id="t%team_id%" src="" country="%country%"></div><span class="align" style="">%teamname%</span></div> </div>',pplayer_new:'<div class="newplayerheading"><p>NEW POWER PLAYER</p></div> <div class="newplayerName" id="%id%"><div class="namesorting" uncapped="%uncap%" style="width: 205px;margin-top: 3px;margin-left:10px;"><div style="margin-left:0px;" class="skilllogos s%d_id%" id="s%skill_id%" dual_skill="s%d_id%"></div><span class="align" style="">%name%</span></div><div class="teamsorting" style="width: 81px;margin-top: 3px;"><div class="teamlogos" id="t%team_id%" src="" country="%country%"></div><span class="align" style="">%teamname%</span></div> </div>',leagueTr:'<a class="leagueLink" href="/ifl/leagues/view/%id%"><div class="leaguesOuterTr"><div class="leaguePlayerTd" style="width: 220px;"><span class="align" style="margin-left:5px;width: 215px;text-align:left;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%name%</span></div><div class="leagueNameTd" style="width: 192px;"><span class="align" style="margin-left:5px;width: 187px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%leagueName%</span></div><div class="leagueRankTd" style="width: 63px;"><span class="align" style="width: 63px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%rank%</span></div></div></a>',pendingTr:'<a class="leagueLink" href="/ifl/leagues/view/%id%"><div class="leaguesOuterTr"><div class="leaguePlayerTd" style="width: 220px;"><span class="align" style="margin-left:5px;width: 215px;text-align:left;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%name%</span></div><div class="leagueNameTd" style="width: 192px;"><span class="align" style="margin-left:5px;width: 187px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%leagueName%</span></div><div class="leagueRankTd" style="width: 63px;"><span class="align" style="width: 63px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">Pending</span></div></div></a>',approvedTr:'<a class="leagueLink" href="/ifl/leagues/view/%id%"><div class="leaguesOuterTr"><div class="leaguePlayerTd" style="width: 220px;"><span class="align" style="margin-left:5px;width: 215px;text-align:left;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%name%</span></div><div class="leagueNameTd" style="width: 192px;"><span class="align" style="margin-left:5px;width: 187px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%leagueName%</span></div><div class="leagueRankTd" style="width: 63px;"><span class="align" style="width: 63px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">Approved</span></div></div></a>',fbleagueTr:'<a class="leagueLink" href="%fbpage%" onclick="%fbperm%"><div class="leaguesOuterTr"><div class="leaguePlayerTd" style="width: 220px;"><span class="align" style="margin-left:5px;width: 215px;text-align:left;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%name%</span></div><div class="leagueNameTd" style="width: 192px;"><span class="align" style="margin-left:5px;width: 380px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;" id="ifFbNet">Facebook League</span></div><div class="leagueRankTd" style="width: 63px;"><span class="align" style="width: 63px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%rank%</span></div></div></a>',cityleagueTr:'<a class="leagueLink" href="/ifl/leaderboard/list/%urlarg%"><div class="leaguesOuterTr"><div class="leaguePlayerTd" style="width: 220px;"><span class="align" style="margin-left:5px;width: 215px;text-align:left;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%name%</span></div><div class="leagueNameTd" style="width: 192px;"><span class="align" style="margin-left:5px;width: 187px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%leagueName%</span></div><div class="leagueRankTd" style="width: 63px;"><span class="align" style="width: 63px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%rank%</span></div></div></a>',favleagueTr:'<a class="leagueLink" href="/ifl/leaderboard/list/franchise/%idf%"><div class="leaguesOuterTr"><div class="leaguePlayerTd" style="width: 220px;"><span class="align" style="margin-left:5px;width: 215px;text-align:left;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%name%</span></div><div class="leagueNameTd" style="width: 192px;"><span class="align" style="margin-left:5px;width: 187px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%leagueName%</span></div><div class="leagueRankTd" style="width: 63px;"><span class="align" style="width: 63px;word-wrap: normal;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">%rank%</span></div></div></a>',batsmanTr:'<li style="clear:none;" class="leaderCard"><div class="leaderCard "><div class="leaderHeader iplCoral"><a href="javascript:void(0)" style="cursor:default;">MOST POINTS: OVERALL</a></div><div class="leaderBackdrop" style="background-image:url(\'https://s3-ap-southeast-1.amazonaws.com/iplsiteimages/team_logo/%teamid%.jpg\');background-size: cover;-webkit-background-size: cover;-ms-background-size: cover;-moz-background-size: cover;-o-background-size: cover;"><div class="leaderStat iplCoral"><span class="digits">%points%</span><!--<span class="statLabel">Points</span>--></div><img src="%img%"></div><div class="leaderChart"><h1><a href="javascript:void(0)" style="cursor:default;">%firstname%</a></h1><h2>%teamname1%</h2><span>1</span></div><div class="leaderChart"><h1><a href="">%secondname%</a></h1><h2>%teamname2% <i>|</i> %secpoints% points</h2><span>2</span></div><div class="leaderChart"><h1><a href="">%thirdname%</a></h1><h2>%teamname3% <i>|</i> %thirdpoints% points</h2><span>3</span></div></div></li>',bowlerTr:'<li style="clear:none;" class="leaderCard"><div class="leaderCard "><div class="leaderHeader iplPurple"><a href="javascript:void(0)" style="cursor:default;">MOST POPULAR</a></div><div class="leaderBackdrop" style="background-image:url(\'https://s3-ap-southeast-1.amazonaws.com/iplsiteimages/team_logo/%teamid%.jpg\');background-size: cover;-webkit-background-size: cover;-ms-background-size: cover;-moz-background-size: cover;-o-background-size: cover;" ><div class="leaderStat iplPurple"><span class="digits">%points%%</span><!--<span class="statLabel">%</span>--></div><img src="%img%"></div><div class="leaderChart"><h1><a href="javascript:void(0)" style="cursor:default;">%firstname%</a></h1><h2>%teamname1%</h2><span>1</span></div><div class="leaderChart"><h1><a href="">%secondname%</a></h1><h2>%teamname2% <i>|</i> %secpoints% %</h2><span>2</span></div><div class="leaderChart"><h1><a href="">%thirdname%</a></h1><h2>%teamname3% <i>|</i> %thirdpoints% %</h2><span>3</span></div></div></li>',wicketTr:'<li style="clear:none;" class="leaderCard"><div class="leaderCard "><div class="leaderHeader iplOrange"><a href="javascript:void(0)" style="cursor:default;">MOST VALUE FOR MONEY</a></div><div class="leaderBackdrop" style="background-image:url(\'https://s3-ap-southeast-1.amazonaws.com/iplsiteimages/team_logo/%teamid%.jpg\');background-size: cover;-webkit-background-size: cover;-ms-background-size: cover;-moz-background-size: cover;-o-background-size: cover;"><div class="leaderStat iplOrange"><span class="digits">%points%</span><!--<span class="statLabel"></span>--></div><img src="%img%"></div><div class="leaderChart"><h1><a href="javascript:void(0)" style="cursor:default;">%firstname%</a></h1><h2>%teamname1%</h2><span>1</span></div><div class="leaderChart"><h1><a href="">%secondname%</a></h1><h2>%teamname2% <i>|</i> %secpoints% </h2><span>2</span></div><div class="leaderChart"><h1><a href="">%thirdname%</a></h1><h2>%teamname3% <i>|</i> %thirdpoints% </h2><span>3</span></div></div></li>',allTr:'<li style="clear:none;" class="leaderCard"><div class="leaderCard "><div class="leaderHeader iplMaroon"><a href="javascript:void(0)" style="cursor:default;">MOST POINTS: LAST MATCH</a></div><div class="leaderBackdrop" style="background-image:url(\'https://s3-ap-southeast-1.amazonaws.com/iplsiteimages/team_logo/%teamid%.jpg\');background-size: cover;-webkit-background-size: cover;-ms-background-size: cover;-moz-background-size: cover;-o-background-size: cover;"><div class="leaderStat iplMaroon"><span class="digits">%points%</span><!--<span class="statLabel">Points</span>--></div><img src="%img%"></div><div class="leaderChart"><h1><a href="javascript:void(0)" style="cursor:default;">%firstname%</a></h1><h2>%teamname1%</h2><span>1</span></div><div class="leaderChart"><h1><a href="">%secondname%</a></h1><h2>%teamname2% <i>|</i> %secpoints% points</h2><span>2</span></div><div class="leaderChart"><h1><a href="">%thirdname%</a></h1><h2>%teamname3% <i>|</i> %thirdpoints% points</h2><span>3</span></div></div></li>',badgeLi:'<li><div class="badgeImage"><img src="%pic%" /></div><div class="badgeText" style="height:239px;"><h1>Congratulations!</h1><p id="howmany">%howmany%</p><div class="badgeTextDiv"><span id="description">%desc%</span></div><p style="position: absolute;bottom: 3px;right: 3px;font-weight: bold;margin-right: 79px;font-size: 16px;">SHARE:</p><img id="tw_in" style="position: absolute;bottom: 0px;right: 44px;cursor:pointer;" src="/ifl/static/images/tw30.png" value="Badge share" onclick="shareBadge_k_tw(\'%oname%\',\'%badpic%\',\'%desc%\',%id%);" /><img id="fb_in" style="position: absolute;bottom: 0px;right: 9px;cursor:pointer;" src="/ifl/static/images/fb30.png" value="Badge share" onclick="fbBadgeShare(\'%oname%\',\'%badpic%\',\'%desc%\',%id%)" /></div></li>',playerCard:'<li class="playercard_dc " style="left:58px;" uncapped="%uncap%" overseas="%country%" value="%id%" ss="%shortname%" st=%teamname% pulse_id=%pulse_id% s="%s1_id%" t="%t_id%" d="%d1_id%" a="%playername1%" p="%price%"><div class="playerimgback_dc" style="background-image: url(\'https://s3-ap-southeast-1.amazonaws.com/iplsiteimages/team_logo/%bck%.jpg\'); background-position: center center; background-repeat: no-repeat;background-size: cover;-webkit-background-size: cover;-ms-background-size: cover;-moz-background-size: cover;-o-background-size: cover;"><img class="playerimg_dc" src="%pic%" style="height: 80px;margin-top: 4px;margin-left: 4px;" /></div><div class="skill_outer_hm"><div class="skilllogos s%d1_id%" style="margin:0 auto;float:none;margin-top:2px;margin-left: 2px;" id="s%s_id%"></div></div>%playertype%<p id="teamnamek_dc" style="margin-top: 11px;">%team%</p><div align="center" style="width:94%;padding-left:2px;position:relative;float:left;"><p id="player_namek_dc">%name%</p></div><p id="price_dc">%price%</p></li>',overseas:'<div class="overseasimg" style="margin-top: 12px;margin-left: 13px;"></div>',uncapped:'<div class="uncappedimg" style="margin-top: 12px;margin-left: 13px;"></div>',emptydiv:'<div class="emptydiv_dc" style="margin-top: 0px;margin-left: 10px;"></div>',playersOut:'<div class="oldplayerName" style="width:320px;"><div class="namesorting" uncapped="%uncap%" style="width: 233px;margin-left:10px;border-bottom:1px solid #ccc;"> <div style="margin-left:0px;" class="skilllogos s%d_id%" id="s%skill_id%" dual_skill="s%d_id%"></div> <span class="align" style="">%name%</span></div> <div class="teamsorting" style="width: 77px;border-bottom:1px solid #ccc;"><div class="teamlogos" id="t%team_id%" src="" country="%country%"></div><span class="align"style="">%team%</span></div></div>',powerplayerStatIn:' <div class="newplayerheading" style="width:310px;"><p>NEW POWER PLAYER</p></div><div class="powerPlayerStatus"><div class="namesorting" uncapped="%uncap%" style="width: 227px;border-bottom:1px solid #ccc;"> <div style="margin-left:0px;" class="skilllogos s%d_id%" id="s%skill_id%" dual_skill="s%d_id%"></div> <span class="align" style="">%name%</span></div> <div class="teamsorting" style="width: 77px;border-bottom:1px solid #ccc;"><div class="teamlogos" id="t%team_id%" src="" country="%country%"></div><span class="align"style="">%team%</span></div></div></div>',powerplayerStatOut:'<div class="oldpayerheading" style="width:310px;"><p>OLD POWER PLAYER</p></div><div class="powerPlayerStatus"><div class="namesorting" uncapped="%uncap%" style="width: 227px;border-bottom:1px solid #ccc;"> <div style="margin-left:0px;" class="skilllogos s%d_id%" id="s%skill_id%" dual_skill="s%d_id%"></div> <span class="align" style="">%name%</span></div> <div class="teamsorting" style="width: 77px;border-bottom:1px solid #ccc;"><div class="teamlogos" id="t%team_id%" src="" country="%country%"></div><span class="align"style="">%team%</span></div></div></div>',history_snip:'<div value="%id_player%" class="playerlist nohover slideIn"><div align="center"><span class="align" style="margin-top: 3px;margin-left:8px;float:left;">%count%</span></div><div class="namesorting" style="width: 236px;" uncapped="%uncapped%"><div class="skilllogos s%d_id%" id="s%s_id%" dual_skill="s%d_id%"></div><span class="align" style="">%name%</span></div><div class="teamsorting"><div class="teamlogos" id="t%team_id%" country="%country%"></div><span class="align" style="">%teamname%</span></div><div class="pricevalues" style="text-align: center;"><span class="align" style="float:right;margin-right: 17px;">%price%</span></div><div style="text-align:right;width:59px;" class="pricesorting"><span class="align" style="float: right;">%points%</span></div></div>'}}();var myPlayers=function(){return{players:{},pplayer_old:0,pplayer_curr:0,createPowerSnip:function(){$(".confirmchange").find(".newplayerheading").remove();$(".confirmchange").find(".oldpayerheading").remove();$(".confirmchange").find(".newplayerName").remove();$(".confirmchange").find(".oldplayerName").remove();var oldp=myPlayers.players[myPlayers.pplayer_old];var op=snippetPlayers.pplayer_old;if(parseInt(myPlayers.pplayer_old)>0){op=op.replace("%name%",oldp.firstname);op=op.replace("%skill_id%",oldp.skill_id);op=op.replace(/%d_id%/g,oldp.dual_skill);op=op.replace("%team_id%",oldp.team_id);op=op.replace("%teamname%",oldp.team_name);op=op.replace("%uncap%",oldp.capped);op=op.replace("%country%",oldp.country_id)}else{op=""}var newp=myPlayers.players[myPlayers.pplayer_curr];var np=snippetPlayers.pplayer_new;if(parseInt(myPlayers.pplayer_curr)>0){np=np.replace("%name%",newp.firstname);np=np.replace("%skill_id%",newp.skill_id);np=np.replace(/%d_id%/g,newp.dual_skill);np=np.replace("%team_id%",newp.team_id);np=np.replace("%teamname%",newp.team_name);np=np.replace("%uncap%",newp.capped);np=np.replace("%country%",newp.country_id);np=np.replace("%id%",myPlayers.pplayer_curr)}else{np=""}$(".confirmchange").append(op+np);var country=$(".newplayerName").find(".teamlogos").attr("country");var uncapped=$(".newplayerName").find(".namesorting").attr("uncapped");if(country!=1){$(".newplayerName").find(".namesorting").html($(".newplayerName").find(".namesorting").html()+"<div class='overseasimg'></div>")}if(uncapped=="0"){$(".newplayerName").find(".namesorting").html($(".newplayerName").find(".namesorting").html()+"<div class='uncappedimg'></div>")}var country1=$(".oldplayerName").find(".teamlogos").attr("country");var uncapped1=$(".oldplayerName").find(".namesorting").attr("uncapped");if(country1!=1){$(".oldplayerName").find(".namesorting").html($(".oldplayerName").find(".namesorting").html()+"<div class='overseasimg'></div>")}if(uncapped1=="0"){$(".oldplayerName").find(".namesorting").html($(".oldplayerName").find(".namesorting").html()+"<div class='uncappedimg'></div>")}}}}();var shareSquad=function(){return{getPlayers:function(){var players=[];var player={};var a=$("#selectmyplayers .playercard_dc");var s=dsorter.sortAsc(a,"s","t","a");$.each(s,function(i,v){player={};player.shortname=$(v).attr("ss");player.id=$(v).attr("value");player.team_id=$(v).attr("t");player.team_name=$(v).attr("st");player.pulse_id=$(v).attr("pulse_id");if($(v).hasClass("powerplayer_dc")){player.power_player="T"}else{player.power_player="F"}players.push(player)});return players}}}();function loadPlayerData(data,powp,stealth){var ppoints={};var old_mat={};powps=0;$.each(data,function(i,v){old_mat[v.id]=1;if(v.powerplayer=="T"){powps=v.id}if(v.type==1){ppoints[v.id]=v.fanta_points}});var trValue1=snippetPlayers.playerCard;var trValueBody="";var sc=addCommas(data[0].user_team_score);scSquad=sc;$("#usersScore").html(sc);if(data[0].subs_is_appl===0){$("#subscount").html("&#8734;")}else{$("#subscount").html(data[0].user_team_subs)}var max_date=0;var max_date_i=0;$.each(data,function(i,val){if(i>=11){return false}var date_val=strToDate_home(val.created_on);if(max_date<date_val){max_date=date_val;max_date_i=i}origTeam.push(val.id.toString());if(val.power_player=="T"){origPow=val.id}});var date=getShareDtFormat_home(data[max_date_i].created_on);updatedON_kk=data[max_date_i].created_on;if(stealth){updated_with_stealth=updatedON_kk;$("#updatedON").html("Updated: "+getShareDtFormat_home(updated_with_stealth))}else{updated_without_stealth=updatedON_kk;$("#updatedON").html("Updated: "+getShareDtFormat_home(updated_without_stealth))}if(data[0].scheduled=="T"&&stealth!="true"){$(".scheduleChange").find("img").css("background-color","#00CC00").attr("title","Subs Scheduled");$(".scheduleChangeOuter").css("background-color","#00CC00").attr("title","Subs Scheduled");$(".scheduleChange").append("<a style='margin-top: -3px;cursor:default;color:#fff;'>Subs already scheduled for Match "+data[0].sched_match+": "+team_k[data[0].sched_team1]+" vs "+team_k[data[0].sched_team2]+"</a><span onclick='showSchedule();'>View or Cancel</span>");$("#powerplayerselect").change(function(){$("#waringSchd").show().css({"margin-left":"0","margin-top":"7px"}).html('<b style="font-weight:bold;">WARNING:</b> Subs already scheduled for Match '+data[0].sched_match+": "+team_k[data[0].sched_team1]+" vs "+team_k[data[0].sched_team2]+".<br /> Confirming any changes will cancel your scheduled subs.");$("#ifschd2").css("margin-top","196px");$("#ifschd1").css({"margin-top":"196px","margin-left":"	102px"});$("#basic-modal-content_pp").modal({onShow:function(dialog){$("#simplemodal-container").css({height:"274px",width:"305px"})},onClose:function(){myPlayers.pplayer_curr=myPlayers.pplayer_old;$.modal.close()}})})}else{if(data[0].scheduled=="F"&&stealth!="true"){$(".scheduleChange").append("<a style='margin-top: 5px;cursor:pointer;text-decoration: underline;color:#fff;' href='/ifl/player/createteam?schedule=true'>SCHEDULE SUBS IN ADVANCE FOR MATCH "+data[0].sched_match+": "+team_k[data[0].sched_team1]+" vs "+team_k[data[0].sched_team2]+" </a>");$(".scheduleChange").find("img").css("background-color","#0AF");$(".scheduleChangeOuter").css({"background-color":"transparent",color:"#fff"});$("#powerplayerselect").change(function(){$("#waringSchd").hide();$("#basic-modal-content_pp").modal({onShow:function(dialog){$("#simplemodal-container").css({height:"230px",width:"305px"})},onClose:function(){myPlayers.pplayer_curr=myPlayers.pplayer_old;$.modal.close()}})})}}if(scheduleStealth_app=="T"){$(".scheduleChangeOuter").css("background-color","#a92727");$(".toseeschedule").css({"background-color":"#a92727",border:"none"}).attr({title:"Subs Scheduled in Stealth Mode",src:"/ifl/static/images/Stealth-sub-sche.png"})}$(".scheduleChangeOuter").css("width",($(".scheduleChange").find("a").width()+$(".scheduleChange").find("img").width()+45));$.each(data,function(i,v){if(i>=11){return false}myPlayers.players[v.id]=v;var skill=v.skill_id;var opt_skill=v.opt_skill_id;if(v.opt_skill_id!==0){if(v.skill_id==2&&v.opt_skill_id==3){skill=2;opt_skill=3}else{skill=((v.skill_id>v.opt_skill_id)?v.skill_id:v.opt_skill_id);opt_skill=((v.skill_id<v.opt_skill_id)?v.skill_id:v.opt_skill_id)}}if(parseInt(v.id)==parseInt(powps)){ppoints[v.id]=ppoints[v.id]!==undefined?ppoints[v.id]*2:0}if(v.power_player=="T"){if(stealth){current_pow_old=myPlayers.pplayer_old;current_pow_new=myPlayers.pplayer_curr}myPlayers.pplayer_old=v.id;myPlayers.pplayer_curr=v.id}trValue=trValue1.replace("%name%",v.firstname);if(v.na==1){trValue=trValue.replace(/%name%/g,'<strike title="Ruled out this season.">'+v.firstname+"</strike>")}else{trValue=trValue.replace(/%name%/g,v.firstname)}trValue=trValue.replace("%id%",v.id);trValue=trValue.replace("%bck%",v.team_id);trValue=trValue.replace("%pic%",v.headshots);trValue=trValue.replace("%s_id%",skill);trValue=trValue.replace("%d_id%",opt_skill);trValue=trValue.replace("%team%",v.team_name);trValue=trValue.replace(/%s1_id%/g,v.skill_id);trValue=trValue.replace(/%d1_id%/g,v.dual_skill);trValue=trValue.replace(/%price%/g,addCommas(v.price));trValue=trValue.replace(/%t_id%/g,v.team_id);trValue=trValue.replace("%uncap%",v.capped);trValue=trValue.replace("%country%",v.country_id);trValue=trValue.replace(/%pulse_id%/g,v.pulse_id);trValue=trValue.replace("%shortname%",v.shortname);trValue=trValue.replace("%teamname%",v.team_name);trValue=trValue.replace("%price%","Price: "+addCommas(v.price));if(v.capped!=0&&v.country_id==1){trValue=trValue.replace("%playertype%",snippetPlayers.emptydiv)}else{if(v.capped==0){trValue=trValue.replace("%playertype%",snippetPlayers.uncapped)}else{trValue=trValue.replace("%playertype%",snippetPlayers.overseas)}}trValueBody+=trValue});if(stealth){$("#selectmyplayers_stealth").append();$(".playercard_dc").css({display:"block",width:"140px"});var a=$("#selectmyplayers_stealth .playercard_dc");var s=dsorter.sortAsc(a,"d","t","a");$("#selectmyplayers_stealth").html(s);$("#selectmyplayers_stealth :nth-child(7)").css("margin-left","80px");powplayerHighlighter1(myPlayers.pplayer_curr);$.each($("#selectmyplayers_stealth .playerlist"),function(i,v){var country=$(v).find(".teamlogos").attr("country");var uncapped=$(v).find(".namesorting").attr("uncapped");if(country!=1){$(this).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='overseasimg'></div>")}if(uncapped=="0"){$(this).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='uncappedimg'></div>")}});myPlayers.pplayer_old=current_pow_old;myPlayers.pplayer_curr=current_pow_new}else{$("#selectmyplayers").append(trValueBody);$(".playercard_dc").css({display:"block",width:"140px"});var a=$("#selectmyplayers .playercard_dc");var s=dsorter.sortAsc(a,"d","t","a");$("#selectmyplayers").html(s);$(".teamlist_dc :nth-child(7)").css("margin-left","80px");powplayerHighlighter(myPlayers.pplayer_curr);$.each($("#selectmyplayers .playerlist"),function(i,v){var country=$(v).find(".teamlogos").attr("country");var uncapped=$(v).find(".namesorting").attr("uncapped");if(country!=1){$(this).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='overseasimg'></div>")}if(uncapped=="0"){$(this).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='uncappedimg'></div>")}});$.each(data,function(i,v){if(i>=11){return false}$("#powerplayerselect").append("<option value="+v.id+" >"+v.firstname+"</option")});$("#powerplayerselect").msDropdown();$(".dd").css("border","none");$("#powerplayerselect_msdd").find(".ddTitle").css({"background-color":"#b72626","background-size":"151px 90px",height:"30px"});$(".ddcommon").css("margin-right","0px");$(".divider").css("display","none");$(".dd .ddChild li").css("padding","2px");$(".dd .ddChild").css({left:"1px","border-radius":"4px"});$(".ddcommon .ddChild").css({width:"95%","padding-left":"4px"});$(".dd .ddTitle .ddTitleText").css("padding","5px 20px 3px 7px");$("#powerplayerselect_msdd").find($(".ddTitleText")).find(".ddlabel").css({color:"#FFFFFF","font-weight":"bold","padding-left":"5px"});$("#powerplayerselect_msdd").css({"padding-left":"0px"});$("#powerplayerselect_msdd").find($(".dd .arrow")).css({background:'url("https://s3-ap-southeast-1.amazonaws.com/iplsiteimages/button_arrow_up_down.png") no-repeat'});$("#powerplayerselect_msdd").find($(".dd .arrow")).css("background-position","");$("#powerplayerselect_msdd").find($(".dd .arrow")).css({"background-position":"-29px 0px","padding-right":"4px"});$("#powerplayerselect_titleText").attr("readonly","readonly");$(".ddcommon input.text").css("opacity","0")}}function sendplayersnames(elem){$(".confirmDis").show();$(".confirmDisLoader").show();var id=$(".newplayerName").attr("id");myPlayers.pplayer_old=myPlayers.pplayer_curr;var arr=[];$.each($("#selectmyplayers").find(".playercard_dc"),function(i,v){var obj={};obj.player_id=$(v).attr("value");arr.push(obj)});arr.push({power_player:id});var playersName=JSON.stringify(arr);$.ajax({type:"POST",url:"/ifl/player/validate",data:"players="+playersName+"&time="+updatedON_kk,success:function(data){if(data=="updating"){$(".updating_k_prev").show()}else{updatedON_kk=data;var date=getShareDtFormat_home(data);$("#updatedON").html("Updated: "+date);$.modal.close();$(".updating_k_prev").hide();powplayerHighlighter(id);badgesAjax.openModal();location.reload()}},error:function(xhr,status,error){$(".confirmDis").hide();$(".confirmDisLoader").hide()}})}function loadLeagueData(data){var trValue1=snippetPlayers.leagueTr;var trValueBody="";$.each(data.rs_my_leagues,function(i,v){if(v.status==0&&v.owner_f==0){trValue1=snippetPlayers.pendingTr}else{if(v.status==1&&v.rank==0&&v.owner_f==0){trValue1=snippetPlayers.approvedTr}else{trValue1=snippetPlayers.leagueTr}}trValue=trValue1.replace(/%leagueName%/g,v.league_name);trValue=trValue.replace("%name%",v.owner_name);trValue=trValue.replace("%id%",v.league_id);if(v.rank==0&&v.status==0){trValue=trValue.replace("%rank%","Approved")}else{if(v.rank==0&&v.status!=0){trValue=trValue.replace("%rank%","1")}else{trValue=trValue.replace("%rank%",addCommas(v.rank))}}trValueBody+=trValue});$("#publicLeagues").append(trValueBody);$("#scrollbarAllLeagues").tinyscrollbar();emptyLeague.display()}function powplayerHighlighter(playerId){if(playerId!=0&&playerId!=undefined){$(".playercard_dc").each(function(i,v){$(v).removeClass("powerplayer_dc");var p=$(v).find(".skilllogos_p").attr("id");var k=$(v).find(".skilllogos_k").attr("id");p=String(p);k=String(k);var check=p.search("p");if(check!=-1){var wp=p.slice(0,2);var wk=k.slice(0,2);$(v).find(".skilllogos_p").attr("id",wp);$(v).find(".skilllogos_k").attr("id",wk)}if($(v).attr("value")==playerId){$(v).addClass("powerplayer_dc");var t=$(v).find(".skilllogos_p").attr("id");var t1=$(v).find(".skilllogos_k").attr("id");$(v).find(".skilllogos_p").attr("id",t+"p");$(v).find(".skilllogos_k").attr("id",t1+"p")}})}}function powplayerHighlighter1(playerId){if(playerId!=0&&playerId!=undefined){$("#selectmyplayers_stealth .playercard_dc").each(function(i,v){$(v).removeClass("powerplayer_dc");var p=$(v).find(".skilllogos_p").attr("id");var k=$(v).find(".skilllogos_k").attr("id");p=String(p);k=String(k);var check=p.search("p");if(check!=-1){var wp=p.slice(0,2);var wk=k.slice(0,2);$(v).find(".skilllogos_p").attr("id",wp);$(v).find(".skilllogos_k").attr("id",wk)}if($(v).attr("value")==playerId){$(v).addClass("powerplayer_dc");var t=$(v).find(".skilllogos_p").attr("id");var t1=$(v).find(".skilllogos_k").attr("id");$(v).find(".skilllogos_p").attr("id",t+"p");$(v).find(".skilllogos_k").attr("id",t1+"p")}})}}function getDdate(d){d=d.split(" ");day=parseFloat(d[0]);if((day>=4&&day<=20)||(day>=24&&day<=30)){suffix="TH"}else{suffix=["ST","ND","RD"][(day%10)-1]}d[0]=d[0]+suffix;return d.join(" ")}function getShareDtFormat_home(dtm){var dt=strToDate_home(dtm);var suffix="";day=(dt.getDate());if((day>=4&&day<=20)||(day>=24&&day<=30)){suffix="th"}else{suffix=["st","nd","rd"][(day%10)-1]}var tdate=dt.getDate();if(tdate<10){tdate="0"+tdate}var dtstr=tdate+" "+dt.getMonthName()+" ";var hour=dt.getHours();var sec=dt.getSeconds();var ap="am";if(hour>11){ap="pm"}if(hour>12){hour=hour-12}if(hour==0){hour=12}if(hour<10){hour="0"+hour}minu=dt.getMinutes();if(minu<10){minu="0"+minu}if(sec<10){dtstr+=" "+hour+":"+minu+":0"+sec+" "+ap}else{dtstr+=" "+hour+":"+minu+":"+sec+" "+ap}return dtstr}function strToDate_home(datestr){var d=datestr.split(" ");var tmp="";tmp=d[1].split(":");d=d[0].split("-");var dt=new Date(d[0],d[1]-1,d[2],tmp[0],tmp[1],tmp[2].split(".")[0],0);return dt}var months=function(){return{names:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},getMonthName:function(m){if(m===undefined||jQuery.trim(m).length===0){return""}if(m<0||m>11){return""}else{return this.names[m]}}}}();Date.prototype.getMonthName=function(){if(isNaN(this)){return NaN}return months.getMonthName(this.getMonth())};var topPlayers=function(){return{skillObj:{},snipMap:{wik:snippetPlayers.wicketTr,all:snippetPlayers.allTr,bol:snippetPlayers.bowlerTr,bat:snippetPlayers.batsmanTr},getHtml:function(t){var arr=topPlayers.skillObj[t];var html=topPlayers.snipMap[t];html=html.replace("%points%",addCommas(arr[0].fanta_points));html=html.replace("%teamid%",arr[0].team_id);html=html.replace("%img%",arr[0].player_photo);html=html.replace("%firstname%",arr[0].firstname);html=html.replace("%teamname1%",arr[0].name);html=html.replace("%secondname%",arr[1].firstname);html=html.replace("%teamname2%",arr[1].name);html=html.replace("%secpoints%",addCommas(arr[1].fanta_points));html=html.replace("%thirdname%",arr[2].firstname);html=html.replace("%teamname3%",arr[2].name);html=html.replace("%thirdpoints%",addCommas(arr[2].fanta_points));return html},loadSnippetData:function(data){$.each(data,function(i,v){if(topPlayers.skillObj[v.type]==undefined){topPlayers.skillObj[v.type]=[]}topPlayers.skillObj[v.type].push(v)});var batsman=topPlayers.getHtml("bat");var allrounder=topPlayers.getHtml("all");var wicketkeeper=topPlayers.getHtml("wik");var bowler=topPlayers.getHtml("bol");$("#topPlayersSnippets").append(batsman);$("#topPlayersSnippets").append(allrounder);$("#topPlayersSnippets").append(wicketkeeper);$("#topPlayersSnippets").append(bowler)}}}();function addCommas(amount){var delimiter=",";var a=amount;var i=parseInt(a);if(isNaN(i)){return""}var minus="";if(i<0){minus="-"}i=Math.abs(i);var n=new String(i);var a=[];while(n.length>3){var nn=n.substr(n.length-3);a.unshift(nn);n=n.substr(0,n.length-3)}if(n.length>0){a.unshift(n)}n=a.join(delimiter);amount=minus+n;return amount}function animateJoinLeague(){$(".joinleagueAnim").css("display","block").animate({height:"120px",top:"228px"},"slow","easeOutBounce",function(){});$("#currentleague").css({opacity:"0.1"})}function reanimateJoinLeague(){$(".joinleagueAnim").animate({height:"0px",top:"236px"},"slow","easeInBack",function(){$(".joinleagueAnim").css("display","none");$("#already_league").css("display","none");$("#league_code_error").css("display","none");$("#joinleague").attr("value","")});$("#currentleague").css({opacity:"1"})}function joinleagueajax(code,team_id){if(code!=0){$.ajax({type:"GET",url:"/ifl/leagues/join_ajax?l_id="+code,success:function(data){if(data=="-1"){$("#already_league").css("display","block");$("#league_code_error").css("display","none")}else{if(data!=-1){reanimateJoinLeague();window.location="/ifl/leagues/view/"+data}else{$("#already_league").css("display","none");$("#league_code_error").css("display","none")}}},error:function(xhr,status,error){$("#already_league").css("display","none");$("#league_code_error").css("display","block")}})}else{}}function getLeagusNames(id){$.get("/ifl/homepage/get_myleagues.json?team_id="+id,function(data){var leag={};var leagues=[];loadLeagueData(data);getpublicLeagues(owner_id_pub);getHistory(history_team_id)})}var emptyLeague=function(){return{count:0,name:"",setName:function(n){this.name=n},display:function(){if(this.count==1){if($("#publicLeagues").find(".leagueLink").length==0){$("#publicLeagues").html("");$("#publicLeagues").css("width","466px");$("#publicLeagues").html("<p id='noleague'>This user has not joined any leagues</p>");$("#noleague").css({width:"479px",height:"244px","line-height":"185px","text-align":"center","font-size":"15px"})}}else{this.count++}}}}();function getpublicLeagues(owner){$.ajax({type:"GET",url:"/ifl/homepage/get_public_leagues_home.json?owner_id="+owner,success:function(data){emptyLeague.setName(data.first_name);var trValue1=snippetPlayers.cityleagueTr;var trValueBody="";var trValue2=snippetPlayers.favleagueTr;var trValueBody1="";$.each(data.city,function(i,v){trValue=trValue1.replace(/%leagueName%/g,v.name);trValue=trValue.replace("%name%","Automatic");if(v.members=="-"){trValue=trValue.replace("%players%","-")}else{trValue=trValue.replace("%players%",addCommas(v.members))}trValue=trValue.replace("%id%",v.team_id);if(v.rank=="Approved"){trValue=trValue.replace("%rank%","Approved")}else{trValue=trValue.replace("%rank%",addCommas(v.rank))}if(data.city_flag==0){trValue=trValue.replace("%urlarg%","overseas")}else{trValue=trValue.replace("%urlarg%","city/"+v.city_id)}trValueBody+=trValue});$.each(data.fav,function(i,v){trValue=trValue2.replace(/%leagueName%/g,v.name);trValue=trValue.replace("%name%","Automatic");if(v.members=="-"){trValue=trValue.replace("%players%","-")}else{trValue=trValue.replace("%players%",addCommas(v.members))}trValue=trValue.replace("%id%",v.team_id);if(v.rank=="Approved"){trValue=trValue.replace("%rank%","Approved")}else{trValue=trValue.replace("%rank%",addCommas(v.rank))}trValue=trValue.replace("%idf%",v.fran_id);trValueBody1+=trValue});if(fbl_flag==true&&(fb_net=="None"||fb_net=="0")){$("#publicLeagues").append(trValueBody1);$("#publicLeagues").append(trValueBody);getfbLeagues(fb_perm,fb_cnt,fb_rnk,fb_net,fb_owner)}else{if(fbl_flag==true&&(fb_net!="None"||fb_net!="0")){getfbLeagues(fb_perm,fb_cnt,fb_rnk,fb_net,fb_owner);$("#publicLeagues").append(trValueBody1);$("#publicLeagues").append(trValueBody)}}if(fbl_flag==false){$("#publicLeagues").append(trValueBody1);$("#publicLeagues").append(trValueBody)}$("#scrollbarAllLeagues").tinyscrollbar();emptyLeague.display()},error:function(xhr,status,error){}})}function open2(url){window.location=url}function badgesmodalpane(){$("#badges-modal-content").modal({minHeight:272,minWidth:642,position:["30%","30%"],containerCss:{padding:0,border:0,backgroundColor:"transparent"},onShow:function(dialog){$("#simplemodal-container a.modalCloseImg").css("right","27px")},onClose:function(dialog){$.modal.close();$.ajax({type:"GET",url:"/ifl/player/update_seen?badges="+badgesAjax.id,success:function(data){},error:function(argument){}})}})}function WelcomeModal(){$("#third-modal-content").modal({minHeight:191,minWidth:384,position:["5%","30%"],onShow:function(dialog){$("#simplemodal-container a.modalCloseImg").css({top:"4px",right:"7px"})}})}var badgesAjax=function(){return{unseen:[],id:"",owner:0,user:0,badge_id:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],ownername:"",setUFlag:function(u,o,n){this.owner=u;this.user=o;this.ownername=n},openModal:function(){$.ajax({type:"GET",url:"/ifl/player/get_badges.json?owner="+badgesAjax.user,success:function(data){var trValue1='<li id="%id%" onclick="badgesmodalpane2(\'%oname%\',\'%desc%\',\'%id%\')"><img class="zoomIn" src="https://s3-ap-southeast-1.amazonaws.com/iplimg/badgesModal/%id%.png" /></li>';var trValue2='<li id="%id%" class="badgeDisable" ><img src="https://s3-ap-southeast-1.amazonaws.com/iplimg/badgesModal/%id%.png" /></li>';var trValueBody="";var emp=0;if(data.badges.length==0){$("#notbadgesatall").show();$("#nums").html(data.badges.length-emp+"/17");return false}$("#notbadgesatall").hide();$("#nums").html(data.badges.length-emp+"/17");$.each(data.badges,function(i,v){trValue=trValue1.replace(/%id%/g,v.id);trValue=trValue.replace(/%desc%/g,v.description);trValue=trValue.replace(/%oname%/g,badgesAjax.owner);var badge_index=$.inArray(v.id,badgesAjax.badge_id);if(badge_index>-1){badgesAjax.badge_id.splice(badge_index,1)}trValueBody+=trValue;if(v.seen==0){badgesAjax.unseen.push(v)}});$.each(badgesAjax.badge_id,function(i,v){trValue=trValue2.replace(/%id%/g,v);trValueBody+=trValue});$("#badges_ul").append(trValueBody);if(badgesAjax.owner==1){$("#badges_ul").find('li[id!="empty"]').css("cursor","pointer")}if(badgesAjax.owner==1){var trValue2=snippetPlayers.badgeLi;var trValueBody2="";$.each(badgesAjax.unseen,function(i,v){var trValue3=trValue2;trValue3=trValue3.replace(/%pic%/g,"https://s3-ap-southeast-1.amazonaws.com/iplimg/badgesModal/"+v.id+".png");trValue3=trValue3.replace(/%desc%/g,v.description);trValue3=trValue3.replace(/%id%/g,v.id);trValue3=trValue3.replace(/%howmany%/g,"You have won "+(badgesAjax.unseen.length)+" badge(s).");trValue3=trValue3.replace(/%badpic%/g,"https://s3-ap-southeast-1.amazonaws.com/iplimg/badgesModal/"+v.id+".png");trValue3=trValue3.replace(/%oname%/g,badgesAjax.ownername);trValueBody2+=trValue3;if(badgesAjax.unseen.length-1==i){badgesAjax.id+=v.id}else{badgesAjax.id+=v.id+","}badgeonamefortw=badgesAjax.ownername;badgepicfortw="https://s3-ap-southeast-1.amazonaws.com/iplimg/badgesModal/"+v.id+".png";badgedescfortw=v.description;badgeidfortw=v.id});if(badgesAjax.unseen.length>0){$("#badges_modal_ul").append(trValueBody2);var k=$("#badges_modal_ul").find("li").length;$("#badges_modal_ul").width(k*558);badgesmodalpane();if(k==1){$(".leftbadgeArrow").attr("id","badges_left_disable");$(".rightbadgeArrow").attr("id","badges_right_disable")}else{$(".leftbadgeArrow").attr("id","badges_left_disable");$(".rightbadgeArrow").attr("id","badges_right_enable");$("#badges_right_enable").bind("click",scrolling_left_modal)}}}var k1=$("#badges_ul").find("li").length;$("#badges_ul").width(k1*115);if(k1<=8){$(".scrollingLeft").attr("id","left_disable");$(".scrollingRight").attr("id","right_disable")}else{$(".scrollingLeft").attr("id","left_disable");$(".scrollingRight").attr("id","badges_right");$("#badges_right").bind("click",scrolling_left)}},error:function(xhr,status,error){}})}}}();function start_scroll_left_badges_modal(){scorllerInterval=setInterval(scroll_left_badges,UpdateInterval)}function scroll_left_badges_modal(){document.getElementById("badges_modal").scrollLeft+=PixelPerInterval;scrolling_left_modal();scrolling_right_modal()}function start_scroll_right_badges_modal(){scorllerInterval=setInterval(scroll_right_badges,UpdateInterval)}function scroll_right_badges_modal(){document.getElementById("badges_modal").scrollLeft-=PixelPerInterval;scrolling_right_modal();scrolling_left_modal()}function stop_scrolling_modal(){clearInterval(scorllerInterval)}function scrolling_right_modal(){l=l-1;var k=document.getElementById("badges_modal_ul");var len=$("#badges_modal_ul").find("li").length;$(".leftbadgeArrow").unbind("click",scrolling_right_modal);$(".rightbadgeArrow").attr("id","badges_right_enable");if(len>1){if($("#badges_modal_ul").position().left+558>$("#badges_modal").position().left){$(k).animate({left:"-="+$("#badges_modal_ul").position().left},function(){$("#badges_left_enable").bind("click",scrolling_right_modal);if(l<=0){$(".leftbadgeArrow").unbind("click",scrolling_right_modal);$(".leftbadgeArrow").attr("id","badges_left_disable");$("#badges_right_enable").bind("click",scrolling_left_modal)}})}else{$(k).animate({left:"+=558"},function(){$("#badges_left_enable").bind("click",scrolling_right_modal);if(l<=0){$(".leftbadgeArrow").unbind("click",scrolling_right_modal);$(".leftbadgeArrow").attr("id","badges_left_disable");$("#badges_right_enable").bind("click",scrolling_left_modal)}})}}}function scrolling_left_modal(){l=l+1;var k=document.getElementById("badges_modal_ul");var len=$("#badges_modal_ul").find("li").length;$(".leftbadgeArrow").attr("id","badges_left_enable");$(".rightbadgeArrow").unbind("click",scrolling_left_modal);if(len>1){if(($("#badges_modal_ul").offset().left+$("#badges_modal_ul").width())>($("#badges_modal").offset().left+$(".badgesList").width())){$("#badges_right_enable").unbind("click",scrolling_left_modal);var diff=($("#badges_modal_ul").offset().left+$("#badges_modal_ul").width())-($("#badges_modal").offset().left+$("#badges_modal").width());if(diff>448){$(k).animate({left:"-=558"},function(){$("#badges_right_enable").bind("click",scrolling_left_modal);if(l<=1){$("#badges_left_enable").bind("click",scrolling_right_modal)}if(diff==558){$(".rightbadgeArrow").attr("id","badges_right_disable");$(".rightbadgeArrow").unbind("click",scrolling_left_modal)}})}else{$(k).animate({left:"-="+diff},function(){$("#badges_right_enable").bind("click",scrolling_left_modal);if(l<=1){$("#badges_left_enable").bind("click",scrolling_right_modal)}})}}else{}}}function reportModal(){$("#report-modal-content-team").modal({minHeight:280,minWidth:500,position:["40%","40%"]})}function badgesmodalpane2(owner,desc,id){$("#badges_modal_ul").html("");if(owner==1&&id!="empty"){$("#badges-modal-content").modal({minHeight:294,minWidth:642,position:["30%","30%"],containerCss:{padding:0,border:0,backgroundColor:"transparent"},onShow:function(dialog){$("#simplemodal-container a.modalCloseImg").css("right","27px");var trValue2=snippetPlayers.badgeLi;var trValueBody2="";var trValue3=trValue2;trValue3=trValue3.replace(/%pic%/g,"https://s3-ap-southeast-1.amazonaws.com/iplimg/badgesModal/"+id+".png");trValue3=trValue3.replace(/%desc%/g,desc);trValue3=trValue3.replace(/%id%/g,id);trValue3=trValue3.replace(/%howmany%/g,"");trValue3=trValue3.replace(/%badpic%/g,"https://s3-ap-southeast-1.amazonaws.com/iplimg/badgesModal/"+id+".png");trValue3=trValue3.replace(/%oname%/g,badgesAjax.ownername);trValueBody2+=trValue3;badgesAjax.id+=id+",";badgeonamefortw=badgesAjax.ownername;badgepicfortw="https://s3-ap-southeast-1.amazonaws.com/iplimg/badgesModal/"+id+".png";badgedescfortw=desc;badgeidfortw=id;$("#badges_modal_ul").append(trValueBody2);$(".leftbadgeArrow").attr("id","badges_left_disable");$(".rightbadgeArrow").attr("id","badges_right_disable")},onClose:function(dialog){$.modal.close()}})}else{}}var dsorter=function(){return{key:"t",key1:"s",key2:"a",desc:"desc",asc:"asc",type:"asc",order:{t:[],s:[4,2,1,3],a:[],p:[],f:[],d:[40,42,24,14,41,20,10,32,23,30]},keymap:{t:"team_id",s:"skill_id",a:"firstname",p:"price",f:"fanta_points",d:"dual_skill"},setKeys:function(typ,k,k1,k2){dsorter.key=k;dsorter.key1=k1;dsorter.key2=k2;dsorter.type=typ},getVal:function(k,v){v=isNaN(parseInt(v))?v:parseInt(v);if(dsorter.order[k].length==0){return v}else{return $.inArray(v,dsorter.order[k])}},sortAsc:function(j,k,k1,k2){dsorter.setKeys(dsorter.asc,k,k1,k2);res=$(j).sort(function(a,b){var x=isNaN(parseFloat($(a).attr(dsorter.key)))?$(a).attr(dsorter.key):parseFloat($(a).attr(dsorter.key));var y=isNaN(parseFloat($(b).attr(dsorter.key)))?$(b).attr(dsorter.key):parseFloat($(b).attr(dsorter.key));if(dsorter.order[dsorter.key].length>0){x=$.inArray(x,dsorter.order[dsorter.key]);y=$.inArray(y,dsorter.order[dsorter.key])}if(x==y){if(dsorter.key1==undefined){return 0}else{x=isNaN(parseFloat($(a).attr(dsorter.key1)))?$(a).attr(dsorter.key1):parseFloat($(a).attr(dsorter.key1));y=isNaN(parseFloat($(b).attr(dsorter.key1)))?$(b).attr(dsorter.key1):parseFloat($(b).attr(dsorter.key1));if(dsorter.order[dsorter.key1].length>0){x=$.inArray(x,dsorter.order[dsorter.key1]);y=$.inArray(y,dsorter.order[dsorter.key1])}if(x==y){if(dsorter.key2==undefined){return 0}else{x=isNaN(parseFloat($(a).attr(dsorter.key2)))?$(a).attr(dsorter.key2):parseFloat($(a).attr(dsorter.key2));y=isNaN(parseFloat($(b).attr(dsorter.key2)))?$(b).attr(dsorter.key2):parseFloat($(b).attr(dsorter.key2));if(dsorter.order[dsorter.key2].length>0){x=$.inArray(x,dsorter.order[dsorter.key2]);y=$.inArray(y,dsorter.order[dsorter.key2])}if(x==y){return 0}return x>y?1:-1}}return x>y?1:-1}}return x>y?1:-1});return res},sortDsc:function(j,k,k1,k2){dsorter.setKeys(dsorter.desc,k,k1,k2);res=$(j).sort(function(a,b){var x=isNaN(parseFloat($(a).attr(dsorter.key)))?$(a).attr(dsorter.key):parseFloat($(a).attr(dsorter.key));var y=isNaN(parseFloat($(b).attr(dsorter.key)))?$(b).attr(dsorter.key):parseFloat($(b).attr(dsorter.key));if(dsorter.order[dsorter.key].length>0){x=$.inArray(x,dsorter.order[dsorter.key]);y=$.inArray(y,dsorter.order[dsorter.key])}if(x==y){if(dsorter.key1==undefined){return 0}else{x=isNaN(parseFloat($(a).attr(dsorter.key1)))?$(a).attr(dsorter.key1):parseFloat($(a).attr(dsorter.key1));y=isNaN(parseFloat($(b).attr(dsorter.key1)))?$(b).attr(dsorter.key1):parseFloat($(b).attr(dsorter.key1));if(dsorter.order[dsorter.key1].length>0){x=$.inArray(x,dsorter.order[dsorter.key1]);y=$.inArray(y,dsorter.order[dsorter.key1])}if(x==y){if(dsorter.key2==undefined){return 0}else{x=isNaN(parseFloat($(a).attr(dsorter.key2)))?$(a).attr(dsorter.key2):parseFloat($(a).attr(dsorter.key2));y=isNaN(parseFloat($(b).attr(dsorter.key2)))?$(b).attr(dsorter.key2):parseFloat($(b).attr(dsorter.key2));if(dsorter.order[dsorter.key2].length>0){x=$.inArray(x,dsorter.order[dsorter.key2]);y=$.inArray(y,dsorter.order[dsorter.key2])}if(x==y){return 0}return x>y?1:-1}}return x>y?1:-1}}return x>y?-1:1});return res}}}();var homepage=function(){var matches=[];var team=[];team[1]="CSK";team[3]="DD";team[4]="KXIP";team[5]="KKR";team[6]="MI";team[8]="RR";team[9]="RCB";team[62]="SRH";return{loadData:function(data){var f='<p style="float: right;">POINTS</p>';$.each(data.fixture,function(i,v){if(v.id==prevUpdatedMatch){f="<p style='float: right;'>"+team[v.team1]+" v "+team[v.team2]+"</p>";return false}});$("#lastMatch_home").html(f)},getMyTeamPosition:function(pid,trelem){var trArr=$(trelem);var pos="e";$.each(trArr,function(i,v){if(dsorter.getVal("d",$(v).attr("d"))>dsorter.getVal("d",teamPlayer.pmap[parseInt(pid)].dual_skill)){pos=i;return false}else{if(dsorter.getVal("d",$(v).attr("d"))==dsorter.getVal("d",teamPlayer.pmap[parseInt(pid)].dual_skill)){if(dsorter.getVal("t",$(v).attr("t"))>dsorter.getVal("t",teamPlayer.pmap[parseInt(pid)].team_id)){pos=i;return false}else{if(dsorter.getVal("t",$(v).attr("t"))==dsorter.getVal("t",teamPlayer.pmap[parseInt(pid)].team_id)){if(dsorter.getVal("a",$(v).attr("a"))>dsorter.getVal("a",teamPlayer.pmap[parseInt(pid)].firstname)){pos=i;return false}}}}}});return pos},getMyRealPosition:function(pid,trelem,t,s,ty){var trArr=$(trelem);var pos="e";var pl=teamPlayer.pmap[pid];if($.inArray(pl.team_id,teamPlayer.playoffs)==-1||$.inArray(pl.id,teamPlayer.cheaters)>-1||pl.na==1||(s>0&&pl.skill_id!=s&&pl.opt_skill!=s)||(t>0&&pl.team_id!=t)||(t==-2&&pl.team_id!=nxtMat.fix_team_1&&pl.team_id!=nxtMat.fix_team_2)||(ty==1&&pl.capped==1)||(ty==2&&pl.country_id==1)){pos=-1}else{$.each(trArr,function(i,v){if(dsorter.type==dsorter.asc){if(dsorter.getVal(dsorter.key,$(v).attr(dsorter.key))>dsorter.getVal(dsorter.key,teamPlayer.pmap[parseInt(pid)][dsorter.keymap[dsorter.key]])){pos=i;return false}else{if(dsorter.getVal(dsorter.key,$(v).attr(dsorter.key))==dsorter.getVal(dsorter.key,teamPlayer.pmap[parseInt(pid)][dsorter.keymap[dsorter.key]])){if(dsorter.getVal(dsorter.key1,$(v).attr(dsorter.key1))>dsorter.getVal(dsorter.key1,teamPlayer.pmap[parseInt(pid)][dsorter.keymap[dsorter.key1]])){pos=i;return false}else{if(dsorter.getVal(dsorter.key1,$(v).attr(dsorter.key1))==dsorter.getVal(dsorter.key1,teamPlayer.pmap[parseInt(pid)][dsorter.keymap[dsorter.key1]])){if(dsorter.getVal(dsorter.key2,$(v).attr(dsorter.key2))>dsorter.getVal(dsorter.key2,teamPlayer.pmap[parseInt(pid)][dsorter.keymap[dsorter.key2]])){pos=i;return false}}}}}}else{if(dsorter.getVal(dsorter.key,$(v).attr(dsorter.key))<dsorter.getVal(dsorter.key,teamPlayer.pmap[parseInt(pid)][dsorter.keymap[dsorter.key]])){pos=i;return false}else{if(dsorter.getVal(dsorter.key,$(v).attr(dsorter.key))==dsorter.getVal(dsorter.key,teamPlayer.pmap[parseInt(pid)][dsorter.keymap[dsorter.key]])){if(dsorter.getVal(dsorter.key1,$(v).attr(dsorter.key1))>dsorter.getVal(dsorter.key1,teamPlayer.pmap[parseInt(pid)][dsorter.keymap[dsorter.key1]])){pos=i;return false}else{if(dsorter.getVal(dsorter.key1,$(v).attr(dsorter.key1))==dsorter.getVal(dsorter.key1,teamPlayer.pmap[parseInt(pid)][dsorter.keymap[dsorter.key1]])){if(dsorter.getVal(dsorter.key2,$(v).attr(dsorter.key2))>dsorter.getVal(dsorter.key2,teamPlayer.pmap[parseInt(pid)][dsorter.keymap[dsorter.key2]])){pos=i;return false}}}}}}})}return pos}}}();function isNumberKey(evt){var charCode=(evt.which)?evt.which:event.keyCode;if(charCode>31&&(charCode<48||charCode>57)){return false}return true}function sociallength(elem){var fbT=$.trim($(elem).val());if(fbT.length==0){$(".socialdis").show()}else{$(".socialdis").hide()}}function limitText(limitField,limitNum,words){var twT=$.trim($(limitField).val());if(twT.length==0){$(".socialdis").hide()}else{$(".socialdis").hide()}if($(limitField).val().length>limitNum){limitField.value=limitField.value.substring(21,limitNum)}cnt=117-words.length;var ele=document.getElementById("w_count");ele.value=cnt;$("#w_count").attr("value",ele.value)}function limitText_bdg(limitField,limitNum,words){var twT=$.trim($(limitField).val());if(twT.length==0){$(".socialdis").hide()}else{$(".socialdis").hide()}if($(limitField).val().length>limitNum){limitField.value=limitField.value.substring(21,limitNum)}cnt=117-words.length;var ele=document.getElementById("w_count_bdg");ele.value=cnt;$("#w_count_bdg").attr("value",ele.value)}var curl_k=0;var myVar;var myVar1;function stealthMode(){$("#selectmyplayers_stealth").html("");$(".stealth").find("img").animate({width:"456px",left:"-50px"},function(){curl_k=curl_k+1;myVar=setInterval(function(){(moreAnimation())},500)});$(".curl").animate({width:"382px",height:"356px"},function(){curl_k=curl_k+1;myVar1=setInterval(function(){(moreAnimation())},500)})}var stealth_count=0;var stealth_team=[];var powPlay_stealth=0;function moreAnimation(){if(curl_k==2){clearInterval(myVar);clearInterval(myVar1);curl_k=0;$(".curl").animate({width:"2173px"});$(".stealth").find("img").animate({width:"452px",left:"700px",top:"-154px"},function(){$("#stealthLoader").show();$(".curl").attr("onclick","");$(".stealthBackImage").find("p").show().html("Back").bind("click",stealthMode_remove);if(stealth_count>=1){$("#stealthLoader").hide();loadPlayerData(stealth_team,powPlay_stealth,true);$("#selectmyplayers_stealth").css("width","975px")}else{$.ajax({type:"POST",url:"/ifl/homepage/public_view_in_stealth.json",success:function(data){stealth_team=data.team_l_list;stealth_count=stealth_count+1;$.each(data.team_l_list,function(i,v){if(v.power_player=="T"){powPlay_stealth=v.id}});$("#stealthLoader").hide();loadPlayerData(data.team_l_list,powPlay_stealth,true);$("#selectmyplayers_stealth").css("width","975px");$(".curl").stop();$(".stealth").find("img").stop()},error:function(xhr,status,error){}})}})}}var curl_k_remove=0;var myVar_remove;var myVar_remove1;function stealthMode_remove(){$("#stealthLoader").hide();$(".stealth").find("img").animate({width:"456px",left:"-39px",top:"0"},function(){$("#selectmyplayers_stealth").animate("width","0px");curl_k_remove=curl_k_remove+1;var myVar_remove=setInterval(function(){(moreAnimation_remove())},500)});$(".curl").animate({width:"382px",height:"356px"},function(){curl_k_remove=curl_k_remove+1;var myVar_remove1=setInterval(function(){(moreAnimation_remove())},500)})}function moreAnimation_remove(){if(curl_k_remove==2){$("#selectmyplayers_stealth").css("width","0px");curl_k_remove=0;clearInterval(myVar_remove);clearInterval(myVar_remove1);$(".curl").animate({width:"40px",height:"40px"});$(".stealth").find("img").animate({width:"49px",left:"-2px",top:"0px"},function(){$(".stealthBackImage").find("p").hide().html("View as public").unbind("click",stealthMode_remove);$(".curl").attr("onclick","stealthMode()");$(".curl").stop();$(".stealth").find("img").stop()})}}function stM(){console.log("10");$(".outerCurl").unbind("click",stM);console.log("1");$("#selectmyplayers_stealth").html("");$(".outerCurl").unbind("mouseover",function(){$(".outerCurlImg").addClass("outerCurl_open");$(".stealthBackImage").find("p").show()});$("#powerplayerselect_msdd").css("opacity","0");$(".outerCurl").find(".outerCurlImg").addClass("outerCurl_anim").on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){$(".stealth-mode-img").show();$("#whatotherssee").show();$(".outerCurl_anim").css({left:"-362px",width:"1767px",top:"-516px"});$("#stealthLoader").show();$(".curl").attr("onclick","");$(".stealthBackImage").find("p").show().html("Back").bind("click",stM_remove);if(stealth_count>=1){$("#stealthLoader").hide();loadPlayerData(stealth_team,powPlay_stealth,true);$("#selectmyplayers_stealth").css("opacity","1")}else{$.ajax({type:"POST",url:"/ifl/homepage/public_view_in_stealth.json",success:function(data){stealth_team=data.team_l_list;stealth_count=stealth_count+1;$.each(data.team_l_list,function(i,v){if(v.power_player=="T"){powPlay_stealth=v.id}});$("#stealthLoader").hide();loadPlayerData(data.team_l_list,powPlay_stealth,true);$("#selectmyplayers_stealth").css("opacity","1")},error:function(xhr,status,error){}});$(".outerCurlImg").off();$(".outerCurl_anim").off()}})}function stM_remove(){$("#powerplayerselect_msdd").css("opacity","1");updatedON_kk=updated_without_stealth;$("#updatedON").html("Updated: "+getShareDtFormat_home(updated_without_stealth));$(".stealthBackImage").find("p").unbind("click",stM_remove);$("#whatotherssee").hide();$(".outerCurl_anim").off("webkitAnimationEnd oanimationend msAnimationEnd animationend");$("#selectmyplayers_stealth").css("opacity","0").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(e){$(".outerCurlImg").css({left:"-62px",width:"115px",top:"0px"});$(".outerCurl_anim").removeClass("outerCurl_anim").addClass("outerCurl_anim_end").on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){$(".outerCurl").bind("mouseover",function(){$(".outerCurlImg").addClass("outerCurl_open");$(".stealthBackImage").find("p").show()});$(".outerCurl").bind("click",stM);$(".stealthBackImage").find("p").hide().html("View as public").unbind("click",stM_remove);$(".outerCurlImg").unbind(e);$("#selectmyplayers_stealth").off();$(".outerCurl_anim_end").off();$(".outerCurl_anim_end").removeClass("outerCurl_anim_end");$("#selectmyplayers_stealth").html("")})})}function showSchedule(){$.ajax({type:"GET",url:"/ifl/player/showsched.json",success:function(data){$("#pl_in_r").html("");$("#pl_out_r").html("");$("#ppl_in_r").html("");$("#ppl_out_r").html("");$(".confirmchange").find(".newplayerheading").remove();$(".confirmchange").find(".oldpayerheading").remove();$(".oldplayerName").html("");$(".newplayerName").html("");teamPlayer=data;var plsnip=snippetPlayers.playersOut;myTeam=[];$.each(teamPlayer.sched_team,function(i,val){myTeam.push(val.id.toString());if(val.power_player=="T"){powplay=val.id}});var pl_in="";$.each(myTeam,function(i,v1){if($.inArray(v1,origTeam)==-1){var v_pos=findWithAttr(teamPlayer.sched_team,"id",parseInt(v1));var v=teamPlayer.sched_team[v_pos];var p=plsnip;p=p.replace("%name%",v.firstname);p=p.replace("%skill_id%",v.skill_id);p=p.replace(/%d_id%/g,v.dual_skill);p=p.replace("%team_id%",v.team_id);p=p.replace("%uncap%",v.capped);p=p.replace("%team%",v.team_name);p=p.replace("%country%",v.country_id);pl_in+=p}});var pl_out="";$.each(origTeam,function(i,v1){if($.inArray(v1,myTeam)==-1){var v_pos=findWithAttr(rs_team,"id",parseInt(v1));var v=rs_team[v_pos];var p=plsnip;p=p.replace("%name%",v.firstname);p=p.replace("%skill_id%",v.skill_id);p=p.replace(/%d_id%/g,v.dual_skill);p=p.replace("%team_id%",v.team_id);p=p.replace("%uncap%",v.capped);p=p.replace("%team%",v.team_name);p=p.replace("%country%",v.country_id);pl_out+=p}});var powOut;if(origPow==0||origPow==undefined){powOut='<div class="oldpayerheading" style="width:310px;"><p>OLD POWER PLAYER</p></div><span class="align" style="color: #676767;margin-left: 10px;border-bottom: 1px solid #ccc;height: 24px;width: 100%;margin-top:3px;">You did not have a Power Player.</span>'}else{powOut=snippetPlayers.powerplayerStatOut;var p=powOut;var v_pos=findWithAttr(rs_team,"id",origPow);var v=rs_team[v_pos];p=p.replace("%name%",v.firstname);p=p.replace("%skill_id%",v.skill_id);p=p.replace(/%d_id%/g,v.dual_skill);p=p.replace("%team_id%",v.team_id);p=p.replace("%uncap%",v.capped);p=p.replace("%team%",v.team_name);p=p.replace("%country%",v.country_id);powOut=p}var powIn;if(powplay==0||powplay==undefined){powIn='<div class="newplayerheading" style="width:310px;"><p>NEW POWER PLAYER</p></div><span class="align" style="color: #676767;margin-left: 10px;border-bottom: 1px solid #ccc;height: 24px;width: 100%; ">You have not selected a Power Player.</span>'}else{powIn=snippetPlayers.powerplayerStatIn;var p=powIn;var v_pos=findWithAttr(teamPlayer.sched_team,"id",powplay);var v=teamPlayer.sched_team[v_pos];p=p.replace("%name%",v.firstname);p=p.replace("%skill_id%",v.skill_id);p=p.replace(/%d_id%/g,v.dual_skill);p=p.replace("%team_id%",v.team_id);p=p.replace("%uncap%",v.capped);p=p.replace("%team%",v.team_name);p=p.replace("%country%",v.country_id);powIn=p}$("#pl_in_r").html("");$("#pl_in_r").html(pl_in);$("#pl_out_r").html(pl_out);if($(pl_in).length==0||$(pl_out).length==0){$("#oldplayerremove").css("display","none");$("#newplayerremove").css("display","none")}else{$("#oldplayerremove").css("display","block");$("#newplayerremove").css("display","block")}$("#ppl_in_r").html(powIn);$("#ppl_out_r").html(powOut);$.each($("#ppl_in_r").find(".powerPlayerStatus"),function(i,v){var country=$(v).find(".teamlogos").attr("country");var uncapped=$(v).find(".namesorting").attr("uncapped");if(country!=1){$(v).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='overseasimg'></div>")}if(uncapped=="0"){$(v).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='uncappedimg'></div>")}});$.each($("#ppl_out_r").find(".powerPlayerStatus"),function(i,v){var country=$(v).find(".teamlogos").attr("country");var uncapped=$(v).find(".namesorting").attr("uncapped");if(country!=1){$(v).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='overseasimg'></div>")}if(uncapped=="0"){$(v).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='uncappedimg'></div>")}});$.each($("#pl_out_r").find(".oldplayerName"),function(i,v){var country=$(v).find(".teamlogos").attr("country");var uncapped=$(v).find(".namesorting").attr("uncapped");if(country!=1){$(v).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='overseasimg'></div>")}if(uncapped=="0"){$(v).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='uncappedimg'></div>")}});$.each($("#pl_in_r").find(".oldplayerName"),function(i,v){var country=$(v).find(".teamlogos").attr("country");var uncapped=$(v).find(".namesorting").attr("uncapped");if(country!=1){$(v).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='overseasimg'></div>")}if(uncapped=="0"){$(v).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='uncappedimg'></div>")}});var uncap_sch=0;var kcnt=parseInt(rs_team[0].user_team_subs)-parseInt(rs_team[0].sched_no_of_subs);$.each($("#pl_in_r").find(".oldplayerName"),function(i,v){var uncapped=$(v).find(".namesorting").attr("uncapped");if(uncapped=="0"){uncap_sch=1}});if(uncap_sch==1){if(rs_team[0].sched_no_of_subs==1){$("#subsusedy").html(rs_team[0].sched_no_of_subs+" SUB USED + 1 FREE SUB | "+kcnt+" SUBS LEFT")}else{$("#subsusedy").html(rs_team[0].sched_no_of_subs+" SUBS USED + 1 FREE SUB | "+kcnt+" SUBS LEFT")}}else{if(rs_team[0].sched_no_of_subs==1){$("#subsusedy").html(rs_team[0].sched_no_of_subs+" SUB USED | "+kcnt+" SUBS LEFT")}else{$("#subsusedy").html(rs_team[0].sched_no_of_subs+" SUBS USED | "+kcnt+" SUBS LEFT")}}$("#basic-modal-content_sch").modal({minHeight:318,minWidth:659,position:["10%","30%"],onShow:function(dialog){$("#basic-modal-content_sch").parent().parent().find(".modalCloseImg").css("top","10px");$("#scrollbarModalPane").tinyscrollbar();if(parseInt(userStealth)>0&&parseInt(userStealth)<=5&&data.sched_team[0].stealth=="T"){$("#simplemodal-container").css({height:"345px"});$(".stealthCheckBox").show();$(".stealthCheckBox_dis").show();$("#stealthCheckBox_status").attr("checked","checked");$(".confrmrightalign").css("margin-top","-33px");if(parseInt(userStealth)==5){$("#stealthRem").html("(5/5 REMAINING)")}else{$("#stealthRem").html("("+parseInt(userStealth-1)+"/5 REMAINING)")}$(".confirmDis").css("top","29px");$(".confirmDisLoader").css("top","35px")}else{$(".stealthCheckBox").hide();$(".confrmrightalign").css("margin-top","0")}}})},error:function(xhr,status,error){}})}function cancelSchd(){$.ajax({type:"GET",url:"/ifl/player/cancelsched.json",success:function(data){location.reload()},error:function(xhr,status,error){}})}function findWithAttr(array,attr,value){for(var i=0;i<array.length;i+=1){if(array[i][attr]===value){return i}}}function getHistory(team_id){var histMap={};var powid=0;var histScores=0;var team_k=[];team_k[0]="TBD";team_k[1]="CSK";team_k[3]="DD";team_k[4]="KXIP";team_k[5]="KKR";team_k[6]="MI";team_k[8]="RR";team_k[9]="RCB";team_k[62]="SRH";$.getJSON("/ifl/static/js/get_players.json",function(data1){$.each(data1.players,function(i,v){histMap[v.id]=v});$.ajax({type:"GET",url:"/ifl/homepage/get_last_history.json?team_id="+team_id,success:function(data){if(data.res.length==0){$("#histlastmatchscore").html("History");$(".nohistory").show();$(".nohistory").html("You have not earned any points yet.");$(".fllhstry").hide()}else{var count=1;$(".nohistory").hide();var trValue1=snippetPlayers.history_snip;var trValueBody="";$.each(data.res,function(i,v){if(v.team_1!=histMap[v.player_id].team_id&&v.team_2!=histMap[v.player_id].team_id){return true}if(v.powerplayer=="T"){powid=v.player_id}trValue=trValue1.replace(/%id%/g,v.player_id);trValue=trValue.replace("%id_player%",v.player_id);trValue=trValue.replace("%count%",count);trValue=trValue.replace(/%s_id%/g,histMap[v.player_id].skill_id);trValue=trValue.replace(/%d_id%/g,histMap[v.player_id].dual_skill);trValue=trValue.replace("%teamname%",histMap[v.player_id].team_name);trValue=trValue.replace(/%team_id%/g,histMap[v.player_id].team_id);trValue=trValue.replace("%uncap%",histMap[v.player_id].capped);trValue=trValue.replace("%country%",histMap[v.player_id].country_id);trValue=trValue.replace(/%points%/g,addCommas(v.score));trValue=trValue.replace("%name%",histMap[v.player_id].firstname);trValue=trValue.replace("%price%",addCommas(histMap[v.player_id].price));count=count+1;histScores+=v.score;trValueBody+=trValue});$(".history_data").append(trValueBody);$("#histlastmatchscore").html("Last Match "+team_k[data.res[0].team_1]+" vs "+team_k[data.res[0].team_2]+": "+addCommas(histScores)+" points");powplayerHighlighterHistory(powid);$("#scrollbarAllHistory").tinyscrollbar();$.each($(".history_data .playerlist"),function(i,v){var country=$(v).find(".teamlogos").attr("country");var uncapped=$(v).find(".namesorting").attr("uncapped");if(country!=1){$(this).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='overseasimg'></div>")}if(uncapped=="0"){$(this).find(".namesorting").html($(this).find(".namesorting").html()+"<div class='uncappedimg'></div>")}})}},error:function(xhr,status,error){}})})}var map={"1":"Chennai Super Kings","3":"Delhi Daredevils","5":"Kolkata Knight Riders","4":"Kings XI Punjab","6":"Mumbai Indians","9":"Royal Challengers B'lore","8":"Rajasthan Royals","62":"Sunrisers Hyderabad"};var team_k=[];team_k[0]="TBD";team_k[1]="CSK";team_k[3]="DD";team_k[4]="KXIP";team_k[5]="KKR";team_k[6]="MI";team_k[8]="RR";team_k[9]="RCB";team_k[62]="SRH";function getfbLeagues(perm,count,rank,network,owner){if(network=="None"||network=="0"){network=0}else{network=1}if(perm=="0"||perm=="None"){perm=0}else{perm=1}var trValue=snippetPlayers.fbleagueTr;var trValueBody="";if(perm==0&&network==1){trValue=trValue.replace("%fbpage%","#");trValue=trValue.replace("%fbperm%","fbfrendsperm();");trValue=trValue.replace("%players%","");trValue=trValue.replace("%rank%","");trValue=trValue.replace("%name%",owner);trValueBody+=trValue}else{if(perm==0&&network==0){trValue=trValue.replace("%fbpage%","#");trValue=trValue.replace("%fbperm%","fbcombine();");trValue=trValue.replace("%players%","");trValue=trValue.replace("%rank%","");trValue=trValue.replace("%name%",owner);trValueBody+=trValue}else{trValue=trValue.replace("%fbpage%","/ifl/autoleague/view");trValue=trValue.replace("%fbperm%","");trValue=trValue.replace("%name%",owner);if(count==0){trValue=trValue.replace("%players%","-")}else{trValue=trValue.replace("%players%",addCommas(count))}if(rank==0){trValue=trValue.replace("%rank%","Approved")}else{trValue=trValue.replace("%rank%",addCommas(rank))}trValueBody+=trValue}}$("#publicLeagues").append(trValueBody);if(perm==0&&network==0){$("#ifFbNet").css({"margin-left":"-217px","z-index":"99","background-color":"#fff",width:"380px;"}).html("Facebook League: <a>Click to create.</a>")}if(perm==0&&network==1){$("#ifFbNet").css({"margin-left":"-217px","z-index":"99","background-color":"#fff",width:"380px;"}).html("Facebook League: <a>Click to create.</a>")}$("#scrollbarAllLeagues").tinyscrollbar();emptyLeague.display()}function powplayerHighlighterHistory(playerId){if(playerId!=0&&playerId!=undefined){$(".history_data .playerlist").each(function(i,v){$(v).removeClass("cyanPlayerList");var p=$(v).find(".namesorting").find(".skilllogos").attr("id");p=String(p);var check=p.search("p");if(check!=-1){var wp=p.slice(0,2);$(v).find(".skilllogos").attr("id",wp);$(v).find(".skilllogos").removeClass($(v).find(".skilllogos").attr("dual_skill")+"p")}if($(v).attr("value")==playerId){$(v).addClass("cyanPlayerList");var k=$(v).find(".namesorting").find(".skilllogos").attr("id");$(v).find(".skilllogos").attr("id",k+"p");$(v).find(".skilllogos").addClass($(v).find(".skilllogos").attr("dual_skill")+"p")}})}};
